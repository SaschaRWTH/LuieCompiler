gate qft(reg) do
    for i in range(sizeof(reg)) do
        h reg[i];
        for j in range(sizeof(reg) - (i + 1)) do
            qif reg[j + (i + 1)] do
                p(1/(2^(j + 1))) reg[i];
            end
        end
    end
end
qubit[3] a;
qft a;